<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    spring |
    
    yuchen</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/technology.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>

<body>
  <div id="container">
    <div id="wrap">
      <section class="outer">
  <article id="post-spring" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      spring
    </h1>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/12/04/spring/" class="article-date">
  <time datetime="2019-12-04T09:49:56.000Z" itemprop="datePublished">2019-12-04</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>引入样式文件 不要用../返回上级目录,有可能导致css文件无法加载,用${pageContext.request.contextPath}表示路径不会出现此问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;$&#123;pageContext.request.contextPath&#125;/css/index.css&quot;&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static String url = &quot;jdbc:mysql://localhost:3306/practise?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone = GMT&quot;;</span><br></pre></td></tr></table></figure>
<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="SpringIOC入门"><a href="#SpringIOC入门" class="headerlink" title="SpringIOC入门"></a>SpringIOC入门</h2><ul>
<li>IOC Inverse of Control反转控制的概念,就是将原本在程序中手动创建UserService对象的控制权,交由Spring框架管理</li>
<li>简单说,就是创建UserService对象控制权被反转到了Spring框架</li>
</ul>
<h3 id="Spring的工厂类"><a href="#Spring的工厂类" class="headerlink" title="Spring的工厂类"></a>Spring的工厂类</h3><p><img src="/2019/12/04/spring/1.png" alt><br><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">public class Spring_iocDemo1 &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    /**</span><br><span class="line">     * 传统方式开发</span><br><span class="line">     */</span><br><span class="line">    public void demo1()&#123;</span><br><span class="line">        UserService userService = new UserServiceImp1();</span><br><span class="line">        userService.sayHello();</span><br><span class="line">        System.out.println(&quot;DEMO1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    /**</span><br><span class="line">     * Spring的方式实现</span><br><span class="line">     */</span><br><span class="line">    public void demo2()&#123;</span><br><span class="line">        //创建Sping的工厂</span><br><span class="line">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        //通过工厂获得类</span><br><span class="line">        UserService userService = (UserService)applicationContext.getBean(&quot;userService&quot;);</span><br><span class="line">        userService.sayHello();</span><br><span class="line">        System.out.println(&quot;DEMO2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    /**</span><br><span class="line">     * 读取磁盘系统中的配置文件</span><br><span class="line">     */</span><br><span class="line">    public void demo3()&#123;</span><br><span class="line">		// 创建Spring的工厂类:</span><br><span class="line">        ApplicationContext applicationContext = new FileSystemXmlApplicationContext(&quot;D:/applicationContext.xml&quot;);</span><br><span class="line">        // 通过工厂获得类:</span><br><span class="line">        UserService userService = (UserService)applicationContext.getBean(&quot;userService&quot;);</span><br><span class="line">        userService.sayHello();</span><br><span class="line">        System.out.println(&quot;DEMO3&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    /**</span><br><span class="line">     * 传统方式的工厂类:BeanFactory</span><br><span class="line">     */</span><br><span class="line">    public void demo4()&#123;</span><br><span class="line">        // 创建工厂类:</span><br><span class="line">        BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource(&quot;applicationContext.xml&quot;));</span><br><span class="line">        // 通过工厂获得类:</span><br><span class="line">        UserService userService = (UserService)beanFactory.getBean(&quot;userService&quot;);</span><br><span class="line">        userService.sayHello();</span><br><span class="line">        System.out.println(&quot;DEMO4&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    /**</span><br><span class="line">     * 传统方式的工厂类:BeanFactory</span><br><span class="line">     */</span><br><span class="line">    public void demo5()&#123;</span><br><span class="line">        // 创建工厂类:</span><br><span class="line">        BeanFactory beanFactory = new XmlBeanFactory(new FileSystemResource(&quot;c:\\applicationContext.xml&quot;));</span><br><span class="line">        // 通过工厂获得类:</span><br><span class="line">        UserService userService = (UserService) beanFactory.getBean(&quot;userService&quot;);</span><br><span class="line"></span><br><span class="line">        userService.sayHello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;userService&quot; class=&quot;com.imooc.ioc.Demo1.UserServiceImp1&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;李四&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<h2 id="SpringBean管理"><a href="#SpringBean管理" class="headerlink" title="SpringBean管理"></a>SpringBean管理</h2><h2 id="XML方式"><a href="#XML方式" class="headerlink" title="XML方式"></a>XML方式</h2><h4 id="使用类构造器实例化-默认无参数-—常用"><a href="#使用类构造器实例化-默认无参数-—常用" class="headerlink" title="使用类构造器实例化(默认无参数)—常用"></a>使用类构造器实例化(默认无参数)—常用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;Bean1&quot; class=&quot;com.imooc.ioc.Demo2.Bean1&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Bean1 &#123;</span><br><span class="line">    public Bean1()&#123;</span><br><span class="line">        System.out.println(&quot;Bean被实例化了!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo &#123;</span><br><span class="line">	public static void Demo1()&#123;</span><br><span class="line">        // 创建工厂</span><br><span class="line">	    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">		// 通过工厂获得类的实例:</span><br><span class="line">	    Bean1 bean1 = (Bean1)applicationContext.getBean(&quot;Bean1&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="使用静态工厂方法实例化-简单工厂模式"><a href="#使用静态工厂方法实例化-简单工厂模式" class="headerlink" title="使用静态工厂方法实例化(简单工厂模式)"></a>使用静态工厂方法实例化(简单工厂模式)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;bean2&quot; class=&quot;com.imooc.ioc.demo2.Bean2Factory&quot; factory-method=&quot;createBean2&quot;/&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Bean的实例化三种方式:静态工厂实例化方式</span><br><span class="line"> */</span><br><span class="line">public class Bean2 &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Bean2的静态工厂</span><br><span class="line"> */</span><br><span class="line">public class Bean2Factory &#123;</span><br><span class="line">	//静态方法</span><br><span class="line">    public static Bean2 createBean2()&#123;</span><br><span class="line">        System.out.println(&quot;Bean2Factory的方法已经执行了...&quot;);</span><br><span class="line">        return new Bean2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo2()&#123;</span><br><span class="line">        // 创建工厂</span><br><span class="line">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        // 通过工厂获得类的实例:</span><br><span class="line">        Bean2 bean2 = (Bean2)applicationContext.getBean(&quot;bean2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用实例工厂方法实例化-工厂方法模式"><a href="#使用实例工厂方法实例化-工厂方法模式" class="headerlink" title="使用实例工厂方法实例化(工厂方法模式)"></a>使用实例工厂方法实例化(工厂方法模式)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--第三种:实例工厂的方式--&gt;</span><br><span class="line">&lt;bean id=&quot;bean3Factory&quot; class=&quot;com.imooc.ioc.demo2.Bean3Factory&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;bean3&quot; factory-bean=&quot;bean3Factory&quot; factory-method=&quot;createBean3&quot;/&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Bean的实例化三种方式:实例工厂实例化</span><br><span class="line"> */</span><br><span class="line">public class Bean3 &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Bean3的实例工厂</span><br><span class="line"> */</span><br><span class="line">public class Bean3Factory &#123;</span><br><span class="line">    public Bean3 createBean3()&#123;</span><br><span class="line">        System.out.println(&quot;Bean3Factory执行了...&quot;);</span><br><span class="line">        return new Bean3();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo3()&#123;</span><br><span class="line">        // 创建工厂</span><br><span class="line">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        // 通过工厂获得类的实例:</span><br><span class="line">        Bean3 bean3 = (Bean3)applicationContext.getBean(&quot;bean3&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bean配置"><a href="#Bean配置" class="headerlink" title="Bean配置"></a>Bean配置</h3><h4 id="id和name"><a href="#id和name" class="headerlink" title="id和name"></a>id和name</h4><ul>
<li>一般情况下,装配一个Bean时,通过指定一个id属性作为Bean的名称</li>
<li>id属性在IOC容器中必须是唯一的</li>
<li>如果Bean的名称中含有特殊字符,就需要使用name属性<h4 id="class"><a href="#class" class="headerlink" title="class"></a>class</h4></li>
<li>class用于设置一个类的完全路径名称,主要作用是IOC容器生成类的实例</li>
</ul>
<h3 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h3><p><img src="/2019/12/04/spring/2.png" alt></p>
<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Bean的作用范围=====================================--&gt;</span><br><span class="line">&lt;bean id=&quot;person&quot; class=&quot;com.imooc.ioc.demo3.Person&quot; scope=&quot;prototype&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Bean的作用范围的测试</span><br><span class="line"> */</span><br><span class="line">public class SpringDemo3 &#123;</span><br><span class="line">@Test</span><br><span class="line">public void demo1()&#123;</span><br><span class="line">    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">    Person persion1 = (Person)applicationContext.getBean(&quot;person&quot;);</span><br><span class="line">    Person persion2 = (Person)applicationContext.getBean(&quot;person&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(persion1);</span><br><span class="line">    System.out.println(persion2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bean的生命周期"><a href="#Bean的生命周期" class="headerlink" title="Bean的生命周期"></a>Bean的生命周期</h3><p><img src="/2019/12/04/spring/3.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Man &#123;</span><br><span class="line">    public Man() &#123;</span><br><span class="line">        System.out.println(&quot;Man被实例化了&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    //方法名可以为任意的</span><br><span class="line">    public void init()&#123;</span><br><span class="line">        System.out.println(&quot;Man被初始化了&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void destroy()&#123;</span><br><span class="line">        System.out.println(&quot;Man被销毁了&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;man&quot; class=&quot;com.imooc.ioc.demo3.Man&quot; init-method=&quot;setup&quot; destroy-method=&quot;teardown&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value=&quot;张三&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo3 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo2()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        Man man = (Man)applicationContext.getBean(&quot;man&quot;);</span><br><span class="line"></span><br><span class="line">        man.run();</span><br><span class="line">		//关闭工厂会调用destroy方法,销毁bean</span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">********************************print************************************</span><br><span class="line">Man被实例化了</span><br><span class="line">Man被初始化了</span><br><span class="line">com.imooc.ioc.Demo3.Man@7a3d45bd</span><br><span class="line">Man被销毁了</span><br></pre></td></tr></table></figure>
<h3 id="Bean的完整生命周期-11个步骤"><a href="#Bean的完整生命周期-11个步骤" class="headerlink" title="Bean的完整生命周期(11个步骤)"></a>Bean的完整生命周期(11个步骤)</h3><p><img src="/2019/12/04/spring/4.png" alt><br><img src="/2019/12/04/spring/5.png" alt><br><img src="/2019/12/04/spring/6.png" alt><br><strong>bean配置</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=&quot;man&quot; class=&quot;com.imooc.ioc.demo3.Man&quot; init-method=&quot;setup&quot; destroy-method=&quot;teardown&quot;&gt;</span><br><span class="line">     &lt;property name=&quot;name&quot; value=&quot;张三&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">//Spring在生成类的实例的过程中会自动调用该类,所以不需要设置id</span><br><span class="line">&lt;bean class=&quot;com.imooc.ioc.demo3.MyBeanPostProcessor&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p><strong>实体类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Man implements BeanNameAware,ApplicationContextAware,InitializingBean,DisposableBean&#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        System.out.println(&quot;第二步:设置属性&quot;);</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Man()&#123;</span><br><span class="line">        System.out.println(&quot;第一步:初始化...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void setup()&#123;</span><br><span class="line">        System.out.println(&quot;第七步:MAN被初始化了...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void teardown()&#123;</span><br><span class="line">        System.out.println(&quot;第十一步:MAN被销毁了...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setBeanName(String name) &#123;</span><br><span class="line">        System.out.println(&quot;第三步:设置Bean的名称&quot;+name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;第四步:了解工厂信息&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void afterPropertiesSet() throws Exception &#123;</span><br><span class="line">        System.out.println(&quot;第六步:属性设置后&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void run()&#123;</span><br><span class="line">        System.out.println(&quot;第九步:执行业务方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void destroy() throws Exception &#123;</span><br><span class="line">        System.out.println(&quot;第十步:执行Spring的销毁方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class MyBeanPostProcessor implements BeanPostProcessor &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        //System.out.println(&quot;第五步:初始化前方法...&quot;);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        //System.out.println(&quot;第八步:初始化后方法...&quot;);</span><br><span class="line">        if(&quot;userDao&quot;.equals(beanName))&#123;</span><br><span class="line">            Object proxy = Proxy.newProxyInstance(bean.getClass().getClassLoader(), bean.getClass().getInterfaces(), new InvocationHandler() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">                    if(&quot;save&quot;.equals(method.getName()))&#123;</span><br><span class="line">                        System.out.println(&quot;权限校验===================&quot;);</span><br><span class="line">                        return method.invoke(bean,args);</span><br><span class="line">                    &#125;</span><br><span class="line">                    return method.invoke(bean,args);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            return proxy;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return bean;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo3 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo1()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        Man man = (Man)context.getBean(&quot;man&quot;);</span><br><span class="line">        man.run();</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">第一步:初始化...</span><br><span class="line">第二步:设置属性</span><br><span class="line">第三步:设置Bean的名称man</span><br><span class="line">第四步:了解工厂信息</span><br><span class="line">第五步:初始化前方法...</span><br><span class="line">第六步:属性设置后</span><br><span class="line">第七步:MAN被初始化了...</span><br><span class="line">第八步:初始化后方法...</span><br><span class="line">第九步:执行业务方法</span><br><span class="line">第十步:执行Spring的销毁方法</span><br><span class="line">第十一步:MAN被销毁了...</span><br></pre></td></tr></table></figure>
<h3 id="BeanPostProcessor接口通过代理类实现方法增强"><a href="#BeanPostProcessor接口通过代理类实现方法增强" class="headerlink" title="BeanPostProcessor接口通过代理类实现方法增强"></a>BeanPostProcessor接口通过代理类实现方法增强</h3><p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean class=&quot;com.imooc.ioc.Demo3.MyBeanPostProcessor&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;userDao&quot; class=&quot;com.imooc.ioc.Demo3.UserDaoImpl&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p><strong>工具类 实现BeanPostProcessor接口</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class MyBeanPostProcessor implements BeanPostProcessor &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;第五步:初始化前方法...&quot;);</span><br><span class="line">        return bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object postProcessAfterInitialization(final Object bean, String beanName) throws BeansException &#123;</span><br><span class="line">        System.out.println(&quot;第八步:初始化后方法...&quot;);</span><br><span class="line">        if(&quot;userDao&quot;.equals(beanName))&#123;</span><br><span class="line">            Object proxy = Proxy.newProxyInstance(bean.getClass().getClassLoader(), bean.getClass().getInterfaces(), new InvocationHandler() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">					//执行删除方法之前进行权限校验</span><br><span class="line">                    if(&quot;delete&quot;.equals(method.getName()))&#123;</span><br><span class="line">                        System.out.println(&quot;权限校验===================&quot;);</span><br><span class="line">                        return method.invoke(bean,args);</span><br><span class="line">                    &#125;</span><br><span class="line">                    return method.invoke(bean,args);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            return proxy;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return bean;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public interface UserDao &#123;</span><br><span class="line">    public void add();</span><br><span class="line">    public void delete();</span><br><span class="line">    public void update();</span><br><span class="line">    public void find();</span><br><span class="line">&#125;</span><br><span class="line">public class UserDaoImpl implements UserDao&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void add() &#123;</span><br><span class="line">        System.out.println(&quot;增加方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void delete() &#123;</span><br><span class="line">        System.out.println(&quot;删除方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void update() &#123;</span><br><span class="line">        System.out.println(&quot;修改方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void find() &#123;</span><br><span class="line">        System.out.println(&quot;查找方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class SpringDemo3 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo2()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        UserDao userDao = (UserDao) context.getBean(&quot;userDao&quot;);</span><br><span class="line">        userDao.add();</span><br><span class="line">        userDao.delete();</span><br><span class="line">        userDao.update();</span><br><span class="line">        userDao.find();</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">增加方法</span><br><span class="line">权限校验===================</span><br><span class="line">删除方法</span><br><span class="line">修改方法</span><br><span class="line">查找方法</span><br></pre></td></tr></table></figure>
<h2 id="Spring的属性注入"><a href="#Spring的属性注入" class="headerlink" title="Spring的属性注入"></a>Spring的属性注入</h2><p><img src="/2019/12/04/spring/7.png" alt></p>
<h3 id="构造方法注入"><a href="#构造方法注入" class="headerlink" title="构造方法注入"></a>构造方法注入</h3><p><img src="/2019/12/04/spring/8.png" alt></p>
<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Bean的构造方法的属性注入=============================--&gt;</span><br><span class="line">&lt;bean id=&quot;user&quot; class=&quot;com.imooc.ioc.Demo4.User&quot;&gt;</span><br><span class="line">    &lt;constructor-arg name=&quot;name&quot; value=&quot;金烨&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">    &lt;constructor-arg name=&quot;age&quot; value=&quot;20&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private Integer age;</span><br><span class="line"></span><br><span class="line">    public User(String name, Integer age) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;User&#123;&quot; +</span><br><span class="line">                &quot;name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">                &quot;, age=&quot; + age +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo4 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo1()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        User user = (User)context.getBean(&quot;user&quot;);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">User&#123;name=&apos;金烨&apos;, age=20&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Set方法注入"><a href="#Set方法注入" class="headerlink" title="Set方法注入"></a>Set方法注入</h3><p><img src="/2019/12/04/spring/9.png" alt></p>
<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Bean的set方法的属性注入==============================--&gt;</span><br><span class="line">&lt;bean id=&quot;person&quot; class=&quot;com.imooc.ioc.Demo4.Person&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;金烨&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;age&quot; value=&quot;20&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;cat&quot; ref=&quot;cats&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean id=&quot;cats&quot; class=&quot;com.imooc.ioc.Demo4.Cat&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;小菊&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">public class Cat &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Cat&#123;&quot; +</span><br><span class="line">                &quot;name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class Person &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private Integer age;</span><br><span class="line"></span><br><span class="line">    private Cat cat;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Integer getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(Integer age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Cat getCat() &#123;</span><br><span class="line">        return cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCat(Cat cat) &#123;</span><br><span class="line">        this.cat = cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Person&#123;&quot; +</span><br><span class="line">                &quot;name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">                &quot;, age=&quot; + age +</span><br><span class="line">                &quot;, cat=&quot; + cat +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo4 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo2()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        Person person = (Person)context.getBean(&quot;person&quot;);</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">Person&#123;name=&apos;金烨&apos;, age=20, cat=Cat&#123;name=&apos;小菊&apos;&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bean的p名称空间的属性注入"><a href="#Bean的p名称空间的属性注入" class="headerlink" title="Bean的p名称空间的属性注入"></a>Bean的p名称空间的属性注入</h3><p><img src="/2019/12/04/spring/10.png" alt></p>
<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Bean的p名称空间的属性注入==============================--&gt;</span><br><span class="line">&lt;bean id=&quot;person&quot; class=&quot;com.imooc.ioc.Demo4.Person&quot; p:name=&quot;金烨&quot; p:age=&quot;20&quot; p:cat-ref=&quot;cats&quot;&gt;&lt;/bean&gt;</span><br><span class="line">&lt;bean id=&quot;cats&quot; class=&quot;com.imooc.ioc.Demo4.Cat&quot; p:name=&quot;小菊&quot;&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p><strong>测试类和结果同上Set方法注入</strong></p>
<h3 id="Bean的SpEL的属性注入"><a href="#Bean的SpEL的属性注入" class="headerlink" title="Bean的SpEL的属性注入"></a>Bean的SpEL的属性注入</h3><p><img src="/2019/12/04/spring/11.png" alt></p>
<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Bean的SpEL的属性注入==============================--&gt;</span><br><span class="line">&lt;bean id=&quot;category&quot; class=&quot;com.imooc.ioc.Demo4.Category&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;#&#123;&apos;服装&apos;&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean id=&quot;productinfo&quot; class=&quot;com.imooc.ioc.Demo4.ProductInfo&quot;&gt;&lt;/bean&gt;</span><br><span class="line">&lt;bean id=&quot;product&quot; class=&quot;com.imooc.ioc.Demo4.Product&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;name&quot; value=&quot;#&#123;&apos;西装&apos;&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;price&quot; value=&quot;#&#123;productinfo.calculatePrice()&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name=&quot;category&quot; value=&quot;#&#123;category&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">public class Category &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Category&#123;&quot; +</span><br><span class="line">                &quot;name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class Product &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private Double price;</span><br><span class="line"></span><br><span class="line">    private Category category;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Double getPrice() &#123;</span><br><span class="line">        return price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPrice(Double price) &#123;</span><br><span class="line">        this.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Category getCategory() &#123;</span><br><span class="line">        return category;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCategory(Category category) &#123;</span><br><span class="line">        this.category = category;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Product&#123;&quot; +</span><br><span class="line">                &quot;name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">                &quot;, price=&quot; + price +</span><br><span class="line">                &quot;, category=&quot; + category +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class ProductInfo &#123;</span><br><span class="line"></span><br><span class="line">    public Double calculatePrice()&#123;</span><br><span class="line">        return Math.random() * 199;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void demo3()&#123;</span><br><span class="line">    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">    Product product = (Product) context.getBean(&quot;product&quot;);</span><br><span class="line">    System.out.println(product);</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">Product&#123;name=&apos;西装&apos;, price=191.1313524903228, category=Category&#123;name=&apos;服装&apos;&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="集合类型的属性注入"><a href="#集合类型的属性注入" class="headerlink" title="集合类型的属性注入"></a>集合类型的属性注入</h3><p><img src="/2019/12/04/spring/12.png" alt></p>
<p><strong>配置Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--集合类型的属性注入=================================--&gt;</span><br><span class="line">&lt;bean id=&quot;collectionBean&quot; class=&quot;com.imooc.ioc.Demo5.CollectionBean&quot;&gt;</span><br><span class="line">	&lt;!--数组类型--&gt;</span><br><span class="line">    &lt;property name=&quot;arrs&quot;&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;value&gt;arr1&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;arr2&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;arr3&lt;/value&gt;</span><br><span class="line">        &lt;/list&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">	&lt;!--List集合的属性注入--&gt;</span><br><span class="line">    &lt;property name=&quot;list&quot;&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;value&gt;list1&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;list2&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;list3&lt;/value&gt;</span><br><span class="line">        &lt;/list&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">	&lt;!--Set集合的属性注入--&gt;</span><br><span class="line">    &lt;property name=&quot;set&quot;&gt;</span><br><span class="line">        &lt;set&gt;</span><br><span class="line">            &lt;value&gt;set&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;set&lt;/value&gt;</span><br><span class="line">            &lt;value&gt;set&lt;/value&gt;</span><br><span class="line">        &lt;/set&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">	&lt;!--Map集合的属性注入--&gt;</span><br><span class="line">    &lt;property name=&quot;map&quot;&gt;</span><br><span class="line">        &lt;map&gt;</span><br><span class="line">            &lt;entry key=&quot;key1&quot; value=&quot;1&quot;&gt;&lt;/entry&gt;</span><br><span class="line">            &lt;entry key=&quot;key2&quot; value=&quot;2&quot;&gt;&lt;/entry&gt;</span><br><span class="line">            &lt;entry key=&quot;key3&quot; value=&quot;3&quot;&gt;&lt;/entry&gt;</span><br><span class="line">        &lt;/map&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">	&lt;!--Properties的属性注入--&gt;</span><br><span class="line">    &lt;property name=&quot;properties&quot;&gt;</span><br><span class="line">        &lt;props&gt;</span><br><span class="line">            &lt;prop key=&quot;props1&quot;&gt;1&lt;/prop&gt;</span><br><span class="line">            &lt;prop key=&quot;props2&quot;&gt;2&lt;/prop&gt;</span><br><span class="line">            &lt;prop key=&quot;props3&quot;&gt;3&lt;/prop&gt;</span><br><span class="line">        &lt;/props&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">public class CollectionBean &#123;</span><br><span class="line">    private String[] arrs; // 数组类型</span><br><span class="line"></span><br><span class="line">    private List&lt;String&gt; list;// List集合类型</span><br><span class="line"></span><br><span class="line">    private Set&lt;String&gt; set; // Set集合类型</span><br><span class="line"></span><br><span class="line">    private Map&lt;String,Integer&gt; map;// Map集合类型</span><br><span class="line"></span><br><span class="line">    private Properties properties; // 属性类型</span><br><span class="line"></span><br><span class="line">    public String[] getArrs() &#123;</span><br><span class="line">        return arrs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setArrs(String[] arrs) &#123;</span><br><span class="line">        this.arrs = arrs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public List&lt;String&gt; getList() &#123;</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setList(List&lt;String&gt; list) &#123;</span><br><span class="line">        this.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Set&lt;String&gt; getSet() &#123;</span><br><span class="line">        return set;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSet(Set&lt;String&gt; set) &#123;</span><br><span class="line">        this.set = set;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Map&lt;String, Integer&gt; getMap() &#123;</span><br><span class="line">        return map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMap(Map&lt;String, Integer&gt; map) &#123;</span><br><span class="line">        this.map = map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Properties getProperties() &#123;</span><br><span class="line">        return properties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setProperties(Properties properties) &#123;</span><br><span class="line">        this.properties = properties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;CollectionBean&#123;&quot; +</span><br><span class="line">                &quot;arrs=&quot; + Arrays.toString(arrs) +</span><br><span class="line">                &quot;, list=&quot; + list +</span><br><span class="line">                &quot;, set=&quot; + set +</span><br><span class="line">                &quot;, map=&quot; + map +</span><br><span class="line">                &quot;, properties=&quot; + properties +</span><br><span class="line">                &apos;&#125;&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo5 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo1()&#123;</span><br><span class="line">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">       CollectionBean collectionBean = (CollectionBean)applicationContext.getBean(&quot;collectionBean&quot;);</span><br><span class="line"></span><br><span class="line">       System.out.println(collectionBean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">CollectionBean&#123;arrs=[arr1, arr2, arr3], list=[list1, list2, list3], set=[set], map=&#123;key1=1, key2=2, key3=3&#125;, properties=&#123;props3=3, props2=2, props1=1&#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h2><p><strong>添加依赖</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-core&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<p><strong>添加约束</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;</span><br><span class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Spring的bean管理的注解方式-Bean管理"><a href="#Spring的bean管理的注解方式-Bean管理" class="headerlink" title="Spring的bean管理的注解方式:Bean管理"></a>Spring的bean管理的注解方式:Bean管理</h3><p><img src="/2019/12/04/spring/13.png" alt></p>
<p><strong>使用注解定义Bean</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Spring的Bean管理的注解方式:</span><br><span class="line"> *  * 传统方式需要去XML中配置&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;&lt;/bean&gt;</span><br><span class="line"> */</span><br><span class="line">@Service(&quot;userService&quot;)</span><br><span class="line">public class UserService &#123;</span><br><span class="line"></span><br><span class="line">    public String sayHello(String name)&#123;</span><br><span class="line">        return &quot;Hello&quot; + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">@Repository(&quot;userDao&quot;)</span><br><span class="line">public class UserDao &#123;</span><br><span class="line"></span><br><span class="line">    public void save()&#123;</span><br><span class="line">        System.out.println(&quot;DAO中保存用户...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Spring的bean管理的注解方式-属性注入"><a href="#Spring的bean管理的注解方式-属性注入" class="headerlink" title="Spring的bean管理的注解方式:属性注入"></a>Spring的bean管理的注解方式:属性注入</h3><p><img src="/2019/12/04/spring/14.png" alt><br><img src="/2019/12/04/spring/15.png" alt></p>
<p><strong>配置文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--开启注解扫描=======================--&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;com.imooc&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Spring的Bean管理的注解方式：</span><br><span class="line"> *  * 传统方式需要去XML中配置&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;&lt;/bean&gt;</span><br><span class="line"> */</span><br><span class="line">@Service(&quot;userService&quot;)</span><br><span class="line">public class UserService &#123;</span><br><span class="line">    @Value(&quot;年糕&quot;)</span><br><span class="line">    private String something;</span><br><span class="line"></span><br><span class="line">   /* @Autowired</span><br><span class="line">    @Qualifier(&quot;userDao&quot;)*/</span><br><span class="line">	@Resource(name=&quot;userDao&quot;)</span><br><span class="line">    private UserDao userDao;</span><br><span class="line"></span><br><span class="line">    public String sayHello(String name)&#123;</span><br><span class="line">        return &quot;Hello&quot; + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void eat()&#123;</span><br><span class="line">        System.out.println(&quot;eat:&quot;+something);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void save()&#123;</span><br><span class="line">        System.out.println(&quot;Service中保存用户&quot;);</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@Repository(&quot;userDao&quot;)</span><br><span class="line">public class UserDao &#123;</span><br><span class="line"></span><br><span class="line">    public void save()&#123;</span><br><span class="line">        System.out.println(&quot;DAO中保存用户...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void demo3()&#123;</span><br><span class="line">    ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">    UserService userService  = (UserService) applicationContext.getBean(&quot;userService&quot;);</span><br><span class="line"></span><br><span class="line">    userService.eat();</span><br><span class="line">    userService.save();</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">eat:年糕</span><br><span class="line">Service中保存用户</span><br><span class="line">DAO中保存用户...</span><br></pre></td></tr></table></figure>

<h3 id="Spring的bean管理的注解方式-其他注解"><a href="#Spring的bean管理的注解方式-其他注解" class="headerlink" title="Spring的bean管理的注解方式:其他注解"></a>Spring的bean管理的注解方式:其他注解</h3><p><img src="/2019/12/04/spring/16.png" alt></p>
<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Component(&quot;bean1&quot;)</span><br><span class="line">public class Bean1 &#123;</span><br><span class="line"></span><br><span class="line">    @PostConstruct</span><br><span class="line">    public void init()&#123;</span><br><span class="line">        System.out.println(&quot;initBean...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void say()&#123;</span><br><span class="line">        System.out.println(&quot;say...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PreDestroy</span><br><span class="line">    public void destory()&#123;</span><br><span class="line">        System.out.println(&quot;destoryBean...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo2 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo1()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">        Bean1 bean1 = (Bean1)applicationContext.getBean(&quot;bean1&quot;);</span><br><span class="line"></span><br><span class="line">        bean1.say();</span><br><span class="line"></span><br><span class="line">        applicationContext.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">initBean...</span><br><span class="line">say...</span><br><span class="line">destoryBean...</span><br></pre></td></tr></table></figure>
<p><img src="/2019/12/04/spring/17.png" alt></p>
<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Component(&quot;bean2&quot;)</span><br><span class="line">/*默认为单例singleton,这里指定为多例prototype*/</span><br><span class="line">@Scope(&quot;prototype&quot;)</span><br><span class="line">public class Bean2 &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo2 &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void demo2()&#123;</span><br><span class="line">        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">        Bean2 bean1 = (Bean2)applicationContext.getBean(&quot;bean2&quot;);</span><br><span class="line">        Bean2 bean2 = (Bean2)applicationContext.getBean(&quot;bean2&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(bean1 == bean2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">**************************print*******************************</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<h3 id="Spring的xml和注解整合"><a href="#Spring的xml和注解整合" class="headerlink" title="Spring的xml和注解整合"></a>Spring的xml和注解整合</h3><p><img src="/2019/12/04/spring/18.png" alt></p>
<p><strong>配置文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:annotation-config/&gt;</span><br><span class="line">&lt;bean id=&quot;productService&quot; class=&quot;com.imooc.ioc.Demo8.ProductService&quot;&gt;</span><br><span class="line">    &lt;!-- &lt;property name=&quot;productDao&quot; ref=&quot;productDao&quot;/&gt;</span><br><span class="line">     &lt;property name=&quot;categoryDao&quot; ref=&quot;categoryDao&quot;/&gt;--&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;productDao&quot; class=&quot;com.imooc.ioc.Demo8.ProductDao&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;categoryDao&quot; class=&quot;com.imooc.ioc.Demo8.CategoryDao&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p><strong>容器类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class ProductDao &#123;</span><br><span class="line">    public void save()&#123;</span><br><span class="line">        System.out.println(&quot;ProductDao的save方法执行了...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class CategoryDao &#123;</span><br><span class="line">    public void save()&#123;</span><br><span class="line">        System.out.println(&quot;CategoryDao中的save方法执行了...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class ProductService &#123;</span><br><span class="line">    @Resource(name=&quot;categoryDao&quot;)</span><br><span class="line">    private CategoryDao categoryDao;</span><br><span class="line"></span><br><span class="line">    @Resource(name=&quot;productDao&quot;)</span><br><span class="line">    private ProductDao productDao;</span><br><span class="line"></span><br><span class="line">/*    public void setCategoryDao(CategoryDao categoryDao) &#123;</span><br><span class="line">        this.categoryDao = categoryDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setProductDao(ProductDao productDao) &#123;</span><br><span class="line">        this.productDao = productDao;</span><br><span class="line">    &#125;*/</span><br><span class="line"></span><br><span class="line">    public void save()&#123;</span><br><span class="line">        System.out.println(&quot;ProductService的save方法执行了...&quot;);</span><br><span class="line">        categoryDao.save();</span><br><span class="line">        productDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>测试类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class SpringDemo3 &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void demo1()&#123;</span><br><span class="line">        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">        ProductService productService = (ProductService)applicationContext.getBean(&quot;productService&quot;);</span><br><span class="line"></span><br><span class="line">        productService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://jinyeeeee.github.io/2019/12/04/spring/" data-id="ck93ts4d8000fssv018pod1s3"
         class="article-share-link">分享</a>
      
    </footer>

  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2019/12/08/network/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            network
          
        </div>
      </a>
    
    
      <a href="/2019/12/02/linux/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">linux</div>
      </a>
    
  </nav>


  

  
    
  

</article>



</section>
    </div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/technology.js"></script>

  </div>
</body>
</html>